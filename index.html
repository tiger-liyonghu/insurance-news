<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒä¿é™©æ¬ºè¯ˆç›‘æµ‹æƒ…æŠ¥ç³»ç»Ÿ v3.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
        }
        
        .glow-border {
            border: 1px solid rgba(6, 182, 212, 0.3);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.2), inset 0 0 20px rgba(6, 182, 212, 0.1);
        }
        
        .glow-border-amber {
            border: 1px solid rgba(245, 158, 11, 0.3);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.2), inset 0 0 20px rgba(245, 158, 11, 0.1);
        }
        
        .card-enter {
            animation: cardEnter 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        
        @keyframes cardEnter {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
            }
            50% {
                box-shadow: 0 0 30px rgba(6, 182, 212, 0.5);
            }
        }
        
        .category-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .category-life { background: rgba(34, 197, 94, 0.2); color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.3); }
        .category-property { background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); }
        .category-reinsurance { background: rgba(168, 85, 247, 0.2); color: #a78bfa; border: 1px solid rgba(168, 85, 247, 0.3); }
        .category-health { background: rgba(236, 72, 153, 0.2); color: #f472b6; border: 1px solid rgba(236, 72, 153, 0.3); }
    </style>
</head>
<body class="bg-slate-950 text-gray-100">
    <!-- v3.0: å‰åç«¯åˆ†ç¦»æ¶æ„ - ä¸å†éœ€è¦ API é…ç½® -->

    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="bg-slate-900/80 backdrop-blur-sm border-b border-cyan-500/20 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center pulse-glow">
                        <i data-lucide="shield-alert" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white tracking-tight">å…¨çƒä¿é™©æ¬ºè¯ˆç›‘æµ‹æƒ…æŠ¥ç³»ç»Ÿ</h1>
                        <p class="text-xs text-cyan-400 font-mono">Global Insurance Fraud Monitoring Intelligence System v3.0</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-2 bg-slate-800/50 px-4 py-2 rounded-lg border border-cyan-500/20">
                        <i data-lucide="clock" class="w-4 h-4 text-cyan-400"></i>
                        <span class="text-sm text-gray-400">ä¸‹æ¬¡åŒæ­¥ï¼š</span>
                        <span id="countdown" class="text-lg font-bold text-cyan-400 font-mono tabular-nums">60:00</span>
                    </div>
                    <button 
                        id="refreshBtn" 
                        class="px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg text-sm font-medium transition-all flex items-center space-x-2"
                    >
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                        <span>ç«‹å³åŒæ­¥</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- åˆ†ç±»ç­›é€‰æ  -->
    <div class="bg-slate-900/50 border-b border-cyan-500/10 sticky top-20 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center space-x-3 overflow-x-auto">
                <span class="text-sm text-gray-400 whitespace-nowrap">åˆ†ç±»ç­›é€‰ï¼š</span>
                <button 
                    class="category-filter active px-4 py-2 rounded-lg text-sm font-medium transition-all bg-cyan-600 text-white"
                    data-category="all"
                >
                    å…¨éƒ¨
                </button>
                <button 
                    class="category-filter px-4 py-2 rounded-lg text-sm font-medium transition-all bg-slate-800 text-gray-300 hover:bg-slate-700"
                    data-category="å¯¿é™©"
                >
                    å¯¿é™©
                </button>
                <button 
                    class="category-filter px-4 py-2 rounded-lg text-sm font-medium transition-all bg-slate-800 text-gray-300 hover:bg-slate-700"
                    data-category="äº§é™©"
                >
                    äº§é™©
                </button>
                <button 
                    class="category-filter px-4 py-2 rounded-lg text-sm font-medium transition-all bg-slate-800 text-gray-300 hover:bg-slate-700"
                    data-category="å†ä¿é™©"
                >
                    å†ä¿é™©
                </button>
                <button 
                    class="category-filter px-4 py-2 rounded-lg text-sm font-medium transition-all bg-slate-800 text-gray-300 hover:bg-slate-700"
                    data-category="å¤§å¥åº·"
                >
                    å¤§å¥åº·
                </button>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" class="text-center py-20">
            <div class="inline-block animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"></div>
            <p class="mt-6 text-cyan-400 text-lg font-medium">æ­£åœ¨åŒæ­¥å…¨çƒæ¬ºè¯ˆç›‘æµ‹æ•°æ®...</p>
            <p class="mt-2 text-gray-500 text-sm">AI æ­£åœ¨åˆ†ææ¡ˆä¾‹å¹¶ç”Ÿæˆæƒ…æŠ¥æ‘˜è¦</p>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div id="error" class="hidden bg-red-900/30 border border-red-700 rounded-lg p-6 mb-6 glow-border-amber">
            <div class="flex items-start space-x-3">
                <i data-lucide="alert-circle" class="w-6 h-6 text-red-400 flex-shrink-0 mt-0.5"></i>
                <div>
                    <h3 class="text-red-300 font-semibold mb-1">æ•°æ®åŒæ­¥å¤±è´¥</h3>
                    <p class="text-red-400 text-sm" id="errorMessage"></p>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div id="stats" class="hidden grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
            <div class="bg-slate-900/50 border border-cyan-500/20 rounded-lg p-4 glow-border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">æ€»æ¡ˆä¾‹æ•°</p>
                        <p class="text-2xl font-bold text-cyan-400 mt-1" id="totalCases">0</p>
                    </div>
                    <i data-lucide="file-text" class="w-8 h-8 text-cyan-400/50"></i>
                </div>
            </div>
            <div class="bg-slate-900/50 border border-cyan-500/20 rounded-lg p-4 glow-border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">å½“å‰ç­›é€‰</p>
                        <p class="text-2xl font-bold text-amber-400 mt-1" id="filteredCases">0</p>
                    </div>
                    <i data-lucide="filter" class="w-8 h-8 text-amber-400/50"></i>
                </div>
            </div>
            <div class="bg-slate-900/50 border border-cyan-500/20 rounded-lg p-4 glow-border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">æœ€åæ›´æ–°</p>
                        <p class="text-lg font-semibold text-green-400 mt-1" id="lastUpdate">--:--</p>
                    </div>
                    <i data-lucide="clock-check" class="w-8 h-8 text-green-400/50"></i>
                </div>
            </div>
            <div class="bg-slate-900/50 border border-cyan-500/20 rounded-lg p-4 glow-border">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-400 text-sm">æ•°æ®æº</p>
                        <p class="text-lg font-semibold text-blue-400 mt-1">NewsAPI</p>
                    </div>
                    <i data-lucide="database" class="w-8 h-8 text-blue-400/50"></i>
                </div>
            </div>
        </div>

        <!-- æ–°é—»åˆ—è¡¨ -->
        <div id="newsContainer" class="hidden grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- æ–°é—»å¡ç‰‡å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
        </div>
    </main>

    <script>
        // ========== å…¨å±€å˜é‡ ==========
        let countdownInterval = null;
        let countdownSeconds = 3600; // 1å°æ—¶ = 3600ç§’
        let allArticles = [];
        let filteredArticles = [];
        let currentCategory = 'all';
        
        // ä¸šåŠ¡çº¿å…³é”®è¯æ˜ å°„
        const businessKeywords = {
            'Life': 'å¯¿é™©',
            'Accident': 'æ„å¤–',
            'Critical Illness': 'é‡ç–¾',
            'Cancer': 'é˜²ç™Œ',
            'LTC': 'æŠ¤ç†',
            'Disability': 'å¤±èƒ½',
            'Medical': 'åŒ»ç–—'
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            setupEventListeners();
            loadNews();
        });

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // åˆ·æ–°æŒ‰é’®
            document.getElementById('refreshBtn').addEventListener('click', () => {
                loadNews();
            });
            
            // åˆ†ç±»ç­›é€‰æŒ‰é’®
            document.querySelectorAll('.category-filter').forEach(btn => {
                btn.addEventListener('click', () => {
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    document.querySelectorAll('.category-filter').forEach(b => {
                        b.classList.remove('active', 'bg-cyan-600', 'text-white');
                        b.classList.add('bg-slate-800', 'text-gray-300');
                    });
                    btn.classList.add('active', 'bg-cyan-600', 'text-white');
                    btn.classList.remove('bg-slate-800', 'text-gray-300');
                    
                    // æ›´æ–°ç­›é€‰
                    currentCategory = btn.dataset.category;
                    filterArticles();
                });
            });
        }

        // v3.0: å¯åŠ¨å€’è®¡æ—¶ï¼ˆæ˜¾ç¤ºè·ç¦»ä¸‹æ¬¡ GitHub Actions æ›´æ–°çš„æ—¶é—´ï¼‰
        function startCountdown() {
            // è®¡ç®—è·ç¦»ä¸‹ä¸€ä¸ªæ•´ç‚¹çš„æ—¶é—´
            const now = new Date();
            const nextHour = new Date(now);
            nextHour.setHours(now.getHours() + 1, 0, 0, 0);
            countdownSeconds = Math.floor((nextHour - now) / 1000);
            
            const countdownEl = document.getElementById('countdown');
            
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            countdownInterval = setInterval(() => {
                countdownSeconds--;
                const minutes = Math.floor(countdownSeconds / 60);
                const seconds = countdownSeconds % 60;
                countdownEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                if (countdownSeconds <= 0) {
                    clearInterval(countdownInterval);
                    // é‡æ–°åŠ è½½æ•°æ®ï¼ˆGitHub Actions åº”è¯¥å·²ç»æ›´æ–°äº† data.jsonï¼‰
                    loadNews();
                }
            }, 1000);
        }

        // v3.0: ä»æœ¬åœ° data.json è¯»å–æ•°æ®ï¼ˆåå°å·²å¤„ç†ï¼‰
        async function loadNews() {
            const loadingEl = document.getElementById('loading');
            const errorEl = document.getElementById('error');
            const errorMessageEl = document.getElementById('errorMessage');
            const newsContainer = document.getElementById('newsContainer');
            const statsEl = document.getElementById('stats');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            loadingEl.classList.remove('hidden');
            errorEl.classList.add('hidden');
            newsContainer.classList.add('hidden');
            statsEl.classList.add('hidden');

            try {
                // ä»æœ¬åœ° data.json è¯»å–æ•°æ®
                const response = await fetch('./data.json', {
                    cache: 'no-store' // ç¡®ä¿è·å–æœ€æ–°æ•°æ®
                });
                
                if (!response.ok) {
                    throw new Error(`æ— æ³•åŠ è½½æ•°æ®æ–‡ä»¶ (${response.status}): ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ºç©ºï¼ˆGitHub Actions å¯èƒ½å°šæœªè¿è¡Œï¼‰
                if (!data.articles || data.articles.length === 0) {
                    // æ˜¾ç¤ºå‹å¥½çš„ç­‰å¾…æç¤ºï¼Œè€Œä¸æ˜¯é”™è¯¯
                    errorMessageEl.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <i data-lucide="clock" class="w-6 h-6 text-amber-400"></i>
                            </div>
                            <div>
                                <strong class="text-amber-300">â³ ç­‰å¾…æ•°æ®æ›´æ–°</strong><br>
                                <p class="text-gray-300 mt-2">
                                    GitHub Actions æ­£åœ¨å‡†å¤‡æ•°æ®ï¼Œè¯·ç¨å€™...<br>
                                    <small class="text-gray-400">
                                    ${data.note || 'æ•°æ®æ–‡ä»¶å·²åˆ›å»ºï¼Œç­‰å¾…åå°è„šæœ¬å¤„ç†æ•°æ®ã€‚'}
                                    </small>
                                </p>
                                <div class="mt-4 space-y-2 text-sm">
                                    <p class="text-gray-400">ğŸ“‹ æ£€æŸ¥æ¸…å•ï¼š</p>
                                    <ul class="list-disc list-inside space-y-1 text-gray-400 ml-4">
                                        <li>ç¡®è®¤å·²é…ç½® GitHub Secretsï¼ˆNEWS_API_KEY, GEMINI_API_KEYï¼‰</li>
                                        <li>æ£€æŸ¥ <a href="https://github.com/tiger-liyonghu/insurance-news/actions" target="_blank" class="text-cyan-400 hover:underline">GitHub Actions</a> æ˜¯å¦æ­£å¸¸è¿è¡Œ</li>
                                        <li>ç­‰å¾… GitHub Actions å®Œæˆæ•°æ®æŠ“å–ï¼ˆé€šå¸¸éœ€è¦ 1-2 åˆ†é’Ÿï¼‰</li>
                                    </ul>
                                </div>
                                <button 
                                    onclick="location.reload()" 
                                    class="mt-4 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg text-sm font-medium transition-colors"
                                >
                                    ğŸ”„ åˆ·æ–°é¡µé¢
                                </button>
                            </div>
                        </div>
                    `;
                    errorEl.classList.remove('hidden');
                    // é‡æ–°åˆå§‹åŒ–å›¾æ ‡
                    setTimeout(() => lucide.createIcons(), 100);
                    return;
                }

                // æ•°æ®å·²ç»åœ¨åå°å¤„ç†å®Œæˆï¼Œç›´æ¥ä½¿ç”¨
                allArticles = data.articles;
                filterArticles();
                
                // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                updateStats();
                
                // æ˜¾ç¤ºæœ€åæ›´æ–°æ—¶é—´
                if (data.lastUpdated) {
                    const lastUpdateEl = document.getElementById('lastUpdate');
                    if (lastUpdateEl) {
                        const updateTime = new Date(data.lastUpdated);
                        lastUpdateEl.textContent = updateTime.toLocaleString('zh-CN', {
                            month: '2-digit',
                            day: '2-digit',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                    }
                }
                
                // å¯åŠ¨å€’è®¡æ—¶
                startCountdown();
                
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                
                // å¦‚æœæ˜¯ 404 é”™è¯¯ï¼Œè¯´æ˜æ–‡ä»¶ä¸å­˜åœ¨
                if (error.message.includes('404') || error.message.includes('æ— æ³•åŠ è½½æ•°æ®æ–‡ä»¶ (404)')) {
                    errorMessageEl.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <i data-lucide="file-x" class="w-6 h-6 text-red-400"></i>
                            </div>
                            <div>
                                <strong class="text-red-300">âŒ data.json æ–‡ä»¶æœªæ‰¾åˆ°</strong><br>
                                <p class="text-gray-300 mt-2">
                                    GitHub Actions å°šæœªè¿è¡Œæˆ–æ–‡ä»¶æœªç”Ÿæˆã€‚
                                </p>
                                <div class="mt-4 space-y-2 text-sm">
                                    <p class="text-gray-400">ğŸ“‹ è§£å†³æ­¥éª¤ï¼š</p>
                                    <ol class="list-decimal list-inside space-y-1 text-gray-400 ml-4">
                                        <li>è®¿é—® <a href="https://github.com/tiger-liyonghu/insurance-news/settings/secrets/actions" target="_blank" class="text-cyan-400 hover:underline">GitHub Secrets</a> é…ç½® API Keys</li>
                                        <li>è®¿é—® <a href="https://github.com/tiger-liyonghu/insurance-news/actions" target="_blank" class="text-cyan-400 hover:underline">GitHub Actions</a> æ‰‹åŠ¨è§¦å‘å·¥ä½œæµ</li>
                                        <li>ç­‰å¾…å·¥ä½œæµå®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰</li>
                                        <li>åˆ·æ–°æ­¤é¡µé¢</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // å…¶ä»–é”™è¯¯
                    errorMessageEl.innerHTML = `
                        <div class="flex items-start space-x-3">
                            <div class="flex-shrink-0">
                                <i data-lucide="alert-circle" class="w-6 h-6 text-red-400"></i>
                            </div>
                            <div>
                                <strong class="text-red-300">âŒ æ•°æ®åŠ è½½å¤±è´¥</strong><br>
                                <p class="text-gray-300 mt-2">${error.message}</p>
                                <div class="mt-4 space-y-2 text-sm text-gray-400">
                                    <p>å¯èƒ½çš„åŸå› ï¼š</p>
                                    <ul class="list-disc list-inside space-y-1 ml-4">
                                        <li>data.json æ–‡ä»¶æ ¼å¼é”™è¯¯</li>
                                        <li>ç½‘ç»œè¿æ¥é—®é¢˜</li>
                                        <li>æ–‡ä»¶è·¯å¾„é”™è¯¯</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                errorEl.classList.remove('hidden');
                // é‡æ–°åˆå§‹åŒ–å›¾æ ‡
                setTimeout(() => lucide.createIcons(), 100);
            } finally {
                loadingEl.classList.add('hidden');
            }
        }

        // v3.0: æ•°æ®å¤„ç†å·²åœ¨åå°å®Œæˆï¼Œä¸å†éœ€è¦è¿™äº›å‡½æ•°

        // ç­›é€‰æ–‡ç« 
        function filterArticles() {
            if (currentCategory === 'all') {
                filteredArticles = allArticles;
            } else {
                filteredArticles = allArticles.filter(article => article.category === currentCategory);
            }
            
            renderNews(filteredArticles);
            updateStats();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            document.getElementById('totalCases').textContent = allArticles.length;
            document.getElementById('filteredCases').textContent = filteredArticles.length;
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('stats').classList.remove('hidden');
        }

        // ç”Ÿæˆåˆ†äº«å›¾ç‰‡
        function generateShareImage(article) {
            // è¿™é‡Œå¯ä»¥å®ç°å›¾ç‰‡ç”Ÿæˆé€»è¾‘
            // å¯ä»¥ä½¿ç”¨ html2canvas åº“æˆ–è°ƒç”¨åç«¯æœåŠ¡
            alert('åˆ†äº«å›¾ç‰‡åŠŸèƒ½å¼€å‘ä¸­...\n\næ¡ˆä¾‹æ ‡é¢˜ï¼š' + article.translations.zh);
        }

        // æ¸²æŸ“æ–°é—»åˆ—è¡¨
        function renderNews(articles) {
            const newsContainer = document.getElementById('newsContainer');
            newsContainer.innerHTML = '';

            articles.forEach((article, index) => {
                const card = document.createElement('div');
                card.className = 'card-enter bg-slate-900/50 border border-cyan-500/20 rounded-lg p-6 glow-border hover:border-cyan-500/50 transition-all';
                card.style.animationDelay = `${index * 0.1}s`;
                
                const publishedDate = article.publishedAt 
                    ? new Date(article.publishedAt).toLocaleString('zh-CN', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                    : 'æœªçŸ¥æ—¶é—´';

                // åˆ†ç±»å¾½ç« æ ·å¼
                const categoryClass = {
                    'å¯¿é™©': 'category-life',
                    'äº§é™©': 'category-property',
                    'å†ä¿é™©': 'category-reinsurance',
                    'å¤§å¥åº·': 'category-health'
                }[article.category] || 'category-property';

                card.innerHTML = `
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="category-badge ${categoryClass}">${article.category}</span>
                                <span class="text-xs text-gray-500">${publishedDate}</span>
                            </div>
                            <h2 class="article-title text-xl font-bold text-white mb-3 leading-tight" data-article-index="${index}">
                                ${article.translations.zh || article.title}
                            </h2>
                            <p class="text-gray-300 text-sm leading-relaxed mb-4">
                                ${article.summary_zh || article.description || 'æš‚æ— æ‘˜è¦'}
                            </p>
                        </div>
                        ${article.urlToImage ? `
                            <img src="${article.urlToImage}" 
                                 alt="${article.translations.zh || article.title}" 
                                 class="ml-4 w-24 h-24 object-cover rounded-lg flex-shrink-0 border border-cyan-500/20"
                                 onerror="this.style.display='none'">
                        ` : ''}
                    </div>
                    
                    <div class="border-t border-cyan-500/20 pt-4 mt-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-2 text-sm text-gray-400">
                                <i data-lucide="newspaper" class="w-4 h-4"></i>
                                <span>${article.source?.name || 'æœªçŸ¥æ¥æº'}</span>
                            </div>
                            <div class="flex items-center space-x-2 text-xs text-gray-500">
                                <span>å¤šè¯­è¨€ï¼š</span>
                                <button class="lang-btn hover:text-cyan-400 transition-colors ${index === 0 ? 'text-cyan-400' : ''}" data-lang="zh" data-article-index="${index}" title="ä¸­æ–‡">ä¸­</button>
                                <span>|</span>
                                <button class="lang-btn hover:text-cyan-400 transition-colors" data-lang="en" data-article-index="${index}" title="English">EN</button>
                                <span>|</span>
                                <button class="lang-btn hover:text-cyan-400 transition-colors" data-lang="th" data-article-index="${index}" title="à¹„à¸—à¸¢">TH</button>
                                <span>|</span>
                                <button class="lang-btn hover:text-cyan-400 transition-colors" data-lang="vi" data-article-index="${index}" title="Tiáº¿ng Viá»‡t">VI</button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <button 
                                class="share-image-btn flex-1 px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-500 hover:to-orange-500 text-white rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2"
                                data-article-index="${index}"
                            >
                                <i data-lucide="image" class="w-4 h-4"></i>
                                <span>ç”Ÿæˆåˆ†äº«å›¾ç‰‡</span>
                            </button>
                            ${article.url ? `
                                <a href="${article.url}" 
                                   target="_blank" 
                                   rel="noopener noreferrer"
                                   class="flex-1 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-lg text-sm font-medium transition-all flex items-center justify-center space-x-2"
                                >
                                    <i data-lucide="external-link" class="w-4 h-4"></i>
                                    <span>æŸ¥çœ‹åŸæ–‡</span>
                                </a>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                newsContainer.appendChild(card);
                
                // ç»‘å®šåˆ†äº«å›¾ç‰‡æŒ‰é’®äº‹ä»¶
                const shareBtn = card.querySelector('.share-image-btn');
                if (shareBtn) {
                    shareBtn.addEventListener('click', () => {
                        generateShareImage(article);
                    });
                }
                
                // ç»‘å®šè¯­è¨€åˆ‡æ¢æŒ‰é’®äº‹ä»¶
                card.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const lang = btn.dataset.lang;
                        const articleIndex = parseInt(btn.dataset.articleIndex);
                        const titleEl = card.querySelector('.article-title');
                        
                        if (titleEl && article.translations && article.translations[lang]) {
                            titleEl.textContent = article.translations[lang];
                            
                            // æ›´æ–°æŒ‰é’®çŠ¶æ€
                            card.querySelectorAll('.lang-btn').forEach(b => {
                                b.classList.remove('text-cyan-400');
                            });
                            btn.classList.add('text-cyan-400');
                        }
                    });
                });
            });
            
            // é‡æ–°åˆå§‹åŒ–å›¾æ ‡
            setTimeout(() => {
                lucide.createIcons();
            }, 100);

            newsContainer.classList.remove('hidden');
        }
    </script>
</body>
</html>
