name: GIFIA Living Scout - 24/7 全球自动侦察

on:
  schedule:
    # 每30分钟执行一次（热点搜索）
    - cron: '*/30 * * * *'
  workflow_dispatch:  # 允许手动触发

jobs:
  scout:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
    
    - name: Run Living Scout
      env:
        TAVILY_API_KEY: ${{ secrets.TAVILY_API_KEY }}
        GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        DEEPSEEK_API_KEY: ${{ secrets.DEEPSEEK_API_KEY }}
        SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
        SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
      run: |
        python3 agent_v4_living_scout.py
    
    - name: Report results
      if: always()
      run: |
        echo "✅ Living Scout 执行完成"
        echo "时间: $(date)"
